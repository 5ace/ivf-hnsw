direct_synthetic_1m_smart = '''1	0.2823	13.3285 us	133.099 dcs
2	0.4059	18.5259 us	161.454 dcs
3	0.4879	22.8038 us	184.407 dcs
4	0.5468	21.937 us	204.015 dcs
5	0.5951	25.0815 us	222.766 dcs
6	0.6376	28.1883 us	240.547 dcs
7	0.6707	31.1119 us	257.468 dcs
8	0.6965	34.0988 us	273.943 dcs
9	0.7186	36.866 us	289.787 dcs
10	0.7361	39.5296 us	304.295 dcs
11	0.7533	42.0785 us	319.227 dcs
12	0.7703	44.76 us	334.068 dcs
13	0.783	47.2897 us	348.612 dcs
14	0.7955	49.8908 us	362.59 dcs
15	0.8067	52.1892 us	376.295 dcs
16	0.8159	54.9514 us	389.916 dcs
17	0.8236	57.3235 us	403.558 dcs
18	0.8315	60.3294 us	416.701 dcs
19	0.8382	62.5142 us	430.085 dcs
20	0.8458	64.8343 us	443.64 dcs
21	0.8521	67.2114 us	456.899 dcs
22	0.8578	69.3213 us	469.948 dcs
23	0.864	72.483 us	483.027 dcs
24	0.8686	74.3246 us	495.997 dcs
25	0.8728	76.5591 us	508.938 dcs
26	0.8759	79.0532 us	521.849 dcs
27	0.8805	81.8171 us	535.035 dcs
28	0.884	84.4641 us	547.876 dcs
29	0.8875	85.6526 us	560.493 dcs
30	0.8918	88.6831 us	573.659 dcs
40	0.9229	112.11 us	698.349 dcs
50	0.9383	135.091 us	819.988 dcs
60	0.9491	157.13 us	939.377 dcs
70	0.9574	180.76 us	1056.22 dcs
80	0.9638	202.858 us	1171.44 dcs
90	0.9694	225.819 us	1284.49 dcs
100	0.9733	246.963 us	1395.69 dcs
140	0.9816	336.053 us	1824.34 dcs
180	0.985	417.859 us	2233.41 dcs
220	0.9876	500.944 us	2626.74 dcs
260	0.9896	581.433 us	3007.99 dcs
300	0.9907	662.413 us	3378.26 dcs
340	0.9915	742.479 us	3738.97 dcs
380	0.9916	821.229 us	4091.56 dcs
420	0.9922	902.909 us	4436.73 dcs
460	0.9925	980.675 us	4775.03 dcs
'''
direct_synthetic_1m_hnsw = '''1	0.2699	16.5507 us	158.614 dcs
2	0.4063	21.7333 us	188.449 dcs
3	0.4951	25.7109 us	212.118 dcs
4	0.5563	29.2705 us	232.618 dcs
5	0.6053	32.5652 us	252.059 dcs
6	0.646	37.1179 us	270.071 dcs
7	0.6792	39.6336 us	286.542 dcs
8	0.7023	42.7654 us	302.417 dcs
9	0.7262	45.5164 us	318.189 dcs
10	0.7463	48.487 us	333.269 dcs
11	0.766	51.1722 us	348.432 dcs
12	0.7814	53.867 us	362.637 dcs
13	0.7943	56.7397 us	376.466 dcs
14	0.8059	59.4262 us	390.518 dcs
15	0.8162	61.3399 us	404.402 dcs
16	0.8265	64.1151 us	417.615 dcs
17	0.8341	66.6646 us	430.999 dcs
18	0.8418	68.9042 us	444.263 dcs
19	0.8489	72.2195 us	457.265 dcs
20	0.8542	74.5989 us	470.476 dcs
21	0.8607	76.3364 us	483.415 dcs
22	0.8653	78.6828 us	496.299 dcs
23	0.8693	81.0685 us	508.89 dcs
24	0.8744	83.7992 us	521.717 dcs
25	0.8783	85.9338 us	534.412 dcs
26	0.8829	88.4656 us	546.978 dcs
27	0.8873	92.4712 us	559.633 dcs
28	0.8912	93.3081 us	572.088 dcs
29	0.8935	95.7892 us	584.837 dcs
30	0.8972	97.6797 us	597.318 dcs
40	0.9246	121.202 us	720.035 dcs
50	0.9392	143.514 us	839.745 dcs
60	0.9498	166.663 us	958.163 dcs
70	0.9598	189.947 us	1074.01 dcs
80	0.9641	211.704 us	1188.08 dcs
90	0.9685	233.347 us	1300.2 dcs
100	0.9729	255.681 us	1410.11 dcs
140	0.981	340.993 us	1836.41 dcs
180	0.9852	424.965 us	2243.63 dcs
220	0.9886	507.581 us	2635.78 dcs
260	0.9901	587.118 us	3015.68 dcs
300	0.9922	666.985 us	3384.83 dcs
340	0.9926	746.869 us	3744.46 dcs
380	0.9939	824.716 us	4096.21 dcs
420	0.9939	904.961 us	4441.1 dcs
460	0.9936	984.647 us	4778.43 dcs
'''

reversed_synthetic_1m_smart = '''1	0.3018	11.5551 us	135.243 dcs
2	0.4187	16.5767 us	168.952 dcs
3	0.4934	20.5884 us	193.866 dcs
4	0.558	24.2759 us	216.779 dcs
5	0.6026	27.687 us	237.586 dcs
6	0.6432	30.8632 us	257.064 dcs
7	0.6746	34.4293 us	275.495 dcs
8	0.7028	37.9504 us	293.463 dcs
9	0.7255	40.7806 us	310.404 dcs
10	0.7474	43.7969 us	327.163 dcs
11	0.7643	46.5246 us	343.085 dcs
12	0.7782	49.1876 us	358.591 dcs
13	0.7906	51.8942 us	374.6 dcs
14	0.8033	54.4819 us	389.743 dcs
15	0.8138	57.1084 us	404.67 dcs
16	0.8239	59.9225 us	419.357 dcs
17	0.8329	62.2702 us	434.286 dcs
18	0.8403	65.0319 us	448.541 dcs
19	0.8455	67.3528 us	462.787 dcs
20	0.8528	70.0197 us	476.585 dcs
21	0.8591	72.4456 us	490.921 dcs
22	0.8651	75.1606 us	505.238 dcs
23	0.8706	77.651 us	519.372 dcs
24	0.8742	80.1842 us	533.422 dcs
25	0.8786	82.5415 us	547.417 dcs
26	0.8827	85.1703 us	561.442 dcs
27	0.8864	87.4102 us	574.94 dcs
28	0.8915	89.9829 us	588.668 dcs
29	0.8951	92.228 us	602.434 dcs
30	0.8972	94.8107 us	615.781 dcs
40	0.9224	118.851 us	748.419 dcs
50	0.9375	142.727 us	878.457 dcs
60	0.9491	165.573 us	1004.91 dcs
70	0.9575	188.674 us	1127.92 dcs
80	0.9628	211.274 us	1248.97 dcs
90	0.9675	234.314 us	1367.69 dcs
100	0.9709	255.31 us	1483.2 dcs
140	0.9784	341.769 us	1928.51 dcs
180	0.9824	424.501 us	2350.32 dcs
220	0.9861	504.092 us	2752.82 dcs
260	0.9872	582.997 us	3138.52 dcs
300	0.9883	660.755 us	3513 dcs
340	0.9895	737.276 us	3876.79 dcs
380	0.9895	811.948 us	4230.51 dcs
420	0.9908	885.279 us	4576.05 dcs
460	0.991	956.93 us	4915 dcs
'''
reversed_synthetic_1m_hnsw = '''
'''


import matplotlib.pyplot as plt
import numpy
import re

M = 1

splitted_smart = re.findall(r"[0-9.]+", direct_synthetic_1m_smart)
splitted_hnsw = re.findall(r"[0-9.]+", direct_synthetic_1m_hnsw)

ef = range(1,30) + range(30, 100, 10) + range(100, 500, 40)


smart_recall = splitted_smart[1::4]
hnsw_recall = splitted_hnsw[1::4]

plt.plot(ef, smart_recall, 'r--')
plt.plot(ef, hnsw_recall)
plt.axis([1, 460, 0, 1])
plt.xlabel('Ef', fontsize=14)
plt.ylabel('Recall@R', fontsize=14)
plt.text(ef[-1]+1, smart_recall[-1], 'Smart HNSW', fontsize=11, color=(1,0,0))
plt.text(ef[-1]+1, float(hnsw_recall[-1])-0.05, 'HNSW', fontsize=11, color=(0,0,1))
plt.title('SIFT' + str(M) + 'M M16 Direct Recall/Ef')
plt.savefig('recall_ef_sift' + str(M) + 'M_M16_direct.png')
#plt.s:ow()
